<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>حاسبة استيراد وسفر متطورة</title>
<style>
body {
  margin: 0;
  font-family: "Tajawal", sans-serif;
  background: url('https://images.unsplash.com/photo-1526772662000-3f88f10405ff?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
  background-size: cover;
  color: #fff;
}
.overlay {
  background: rgba(0,0,0,0.65);
  min-height: 100vh;
  padding: 20px;
}
.container {
  max-width: 1400px;
  margin: auto;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}
.card {
  background: rgba(20,20,30,0.75);
  padding: 20px;
  border-radius: 15px;
  backdrop-filter: blur(6px);
}
h1 {
  text-align: center;
  margin-top: 0;
  font-size: 26px;
}
input, button, select {
  width: 100%;
  padding: 10px;
  margin: 5px 0 10px;
  border-radius: 8px;
  border: none;
  font-size: 14px;
}
button {
  cursor: pointer;
  background: #0aa;
  color: #fff;
}
button:hover {
  background: #088;
}
.table-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr;
  gap: 10px;
  margin-bottom: 10px;
}
.product-container {
  margin-top: 20px;
}
.lang-buttons {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-bottom: 20px;
}
.red {
  color: #ff6b6b;
  font-weight: bold;
}
</style>
</head>
<body>
<div class="overlay">

<h1 id="title">حاسبة استيراد وسفر — متطورة</h1>
<div class="lang-buttons">
  <button onclick="setLang('ar')">عربي</button>
  <button onclick="setLang('fr')">Français</button>
  <button onclick="setLang('en')">EN</button>
</div>

<div class="container">
  <!-- الواجهة اليمنى -->
  <div class="card">
    <h2 id="officialTitle">سعر رسمي وبيانات تحويل</h2>
    <label id="eurRateLabel"></label>
    <input id="rate" type="number" value="153" />

    <label id="amountLabel"></label>
    <input id="amount" type="number" value="1000" />

    <h3 id="travelCostTitle"></h3>
    <label id="flightLabel"></label>
    <input id="flight" type="number" value="30000" />

    <label id="hotelLabel"></label>
    <input id="hotel" type="number" value="150000" />

    <label id="foodLabel"></label>
    <input id="food" type="number" value="50000" />

    <label id="extraLabel"></label>
    <input id="extra" type="number" value="20000" />

  </div>

  <!-- الواجهة اليسرى -->
  <div class="card" id="summaryCard">
    <h2 id="summaryTitle"></h2>
    <p id="sum_eur"></p>
    <p id="sum_dzd"></p>
    <p id="customs"></p>
    <p id="plus30"></p>
    <p id="tax"></p>
    <p id="travel"></p>
    <p id="total"></p>

    <h3 id="profitTitle"></h3>
    <p id="buy_total"></p>
    <p id="sell_total"></p>
    <p id="profit_state"></p>
  </div>
</div>

<!-- المنتجات -->
<div class="card product-container">
  <h2 id="productsTitle"></h2>

  <div class="table-row" style="font-weight:bold;">
    <div id="pnameHead"></div>
    <div id="pbuyHead"></div>
    <div id="psellHead"></div>
    <div id="pqtyHead"></div>
  </div>

  <div id="products"></div>

  <button onclick="addProduct()" id="addBtn"></button>
  <button onclick="calculateAll()" id="calcBtn"></button>
</div>

</div>

<script>
let LANG = 'ar';

const TEXT = {
 ar: {
   title: "حاسبة استيراد وسفر — متطورة",
   officialTitle: "سعر رسمي وبيانات تحويل",
   eurRateLabel: "سعر 1 يورو مقابل دينار جزائري (رسمي)",
   amountLabel: "كمية اليورو للتحويل",
   travelCostTitle: "مصاريف السفر",
   flightLabel: "تذكرة طيران",
   hotelLabel: "فندق",
   foodLabel: "أكل وشرب",
   extraLabel: "مصاريف إضافية",
   summaryTitle: "الملخص والحسابات",
   productsTitle: "المنتجات (قابلة للإضافة)",
   pnameHead: "اسم المنتج",
   pbuyHead: "سعر الشراء (EUR)",
   psellHead: "سعر البيع (EUR)",
   pqtyHead: "الكمية",
   addBtn: "إضافة منتج",
   calcBtn: "احسب الكل"
 },
 fr: {
   title: "Calculateur Import & Voyage — Avancé",
   officialTitle: "Taux officiel et conversion",
   eurRateLabel: "Taux de 1 EUR en DZD (officiel)",
   amountLabel: "Montant en EUR",
   travelCostTitle: "Frais de voyage",
   flightLabel: "Billet d'avion",
   hotelLabel: "Hôtel",
   foodLabel: "Nourriture",
   extraLabel: "Frais supplémentaires",
   summaryTitle: "Résumé & Calculs",
   productsTitle: "Produits (Ajoutables)",
   pnameHead: "Produit",
   pbuyHead: "Achat (EUR)",
   psellHead: "Vente (EUR)",
   pqtyHead: "Qté",
   addBtn: "Ajouter Produit",
   calcBtn: "Calculer"
 },
 en: {
   title: "Advanced Import & Travel Calculator",
   officialTitle: "Official Rate & Conversion",
   eurRateLabel: "1 EUR to DZD (Official)",
   amountLabel: "EUR Amount",
   travelCostTitle: "Travel Costs",
   flightLabel: "Flight Ticket",
   hotelLabel: "Hotel",
   foodLabel: "Food",
   extraLabel: "Extra Costs",
   summaryTitle: "Summary & Calculations",
   productsTitle: "Products (Addable)",
   pnameHead: "Product Name",
   pbuyHead: "Buy Price (EUR)",
   psellHead: "Sell Price (EUR)",
   pqtyHead: "Qty",
   addBtn: "Add Product",
   calcBtn: "Calculate All"
 }
};

function setLang(l) {
 LANG = l;
 updateLang();
}

function updateLang(){
 const t = TEXT[LANG];
 document.getElementById("title").innerText = t.title;
 document.getElementById("officialTitle").innerText = t.officialTitle;
 document.getElementById("eurRateLabel").innerText = t.eurRateLabel;
 document.getElementById("amountLabel").innerText = t.amountLabel;
 document.getElementById("travelCostTitle").innerText = t.travelCostTitle;
 document.getElementById("flightLabel").innerText = t.flightLabel;
 document.getElementById("hotelLabel").innerText = t.hotelLabel;
 document.getElementById("foodLabel").innerText = t.foodLabel;
 document.getElementById("extraLabel").innerText = t.extraLabel;
 document.getElementById("summaryTitle").innerText = t.summaryTitle;
 document.getElementById("productsTitle").innerText = t.productsTitle;
 document.getElementById("pnameHead").innerText = t.pnameHead;
 document.getElementById("pbuyHead").innerText = t.pbuyHead;
 document.getElementById("psellHead").innerText = t.psellHead;
 document.getElementById("pqtyHead").innerText = t.pqtyHead;
 document.getElementById("addBtn").innerText = t.addBtn;
 document.getElementById("calcBtn").innerText = t.calcBtn;
}

let products = [];

function addProduct(){
 const id = products.length;
 const div = document.createElement("div");
 div.className = "table-row";
 div.innerHTML = `
   <input placeholder="اسم المنتج" id="name_${id}">
   <input type="number" placeholder="سعر الشراء" id="buy_${id}">
   <input type="number" placeholder="سعر البيع" id="sell_${id}">
   <input type="number" placeholder="الكمية" id="qty_${id}">
 `;
 document.getElementById("products").appendChild(div);
 products.push(id);
}

function calculateAll() {
 let rate = Number(document.getElementById("rate").value);
 let amount = Number(document.getElementById("amount").value);

 let flight = Number(document.getElementById("flight").value);
 let hotel = Number(document.getElementById("hotel").value);
 let food = Number(document.getElementById("food").value);
 let extra = Number(document.getElementById("extra").value);

 let total_buy_eur = 0;
 let total_sell_eur = 0;

 for (let i of products){
   let buy = Number(document.getElementById(`buy_${i}`).value);
   let sell = Number(document.getElementById(`sell_${i}`).value);
   let qty = Number(document.getElementById(`qty_${i}`).value);
   total_buy_eur += buy * qty;
   total_sell_eur += sell * qty;
 }

 let converted = amount * rate;
 let customs = total_buy_eur * 0.05 * rate;
 let inc30 = total_buy_eur * 0.30 * rate;
 let tax = total_buy_eur * 0.005 * rate;
 let travel = flight + hotel + food + extra;
 let total_dzd = (total_buy_
